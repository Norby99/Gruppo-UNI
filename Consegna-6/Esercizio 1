#include <stdio.h>
#include <string.h>
#include <stdbool.h>

#define MAX_VOCI 100
#define MAX_NAME_LENGTH 50
#define MAX_PHONE_NUMBER_LENGTH 15

typedef struct{
    char *name;
    char *phoneNumber;
    
}voceRubrica;

typedef struct{
    voceRubrica list[MAX_VOCI];
    int len;
}Rubrica;

Rubrica *newRubrica();
void addVoice(Rubrica *, char *, char *);
bool isIn(Rubrica *, char *);

int printMenu();
void tryAddVoice(Rubrica *);

int main() {

    Rubrica *rubrica = newRubrica();
    bool temp = true;

    while(temp){
        switch(printMenu()){
            case 1:
                tryAddVoice(rubrica);
                break;
            case 2:
                "cazzo";
                break;
            case 3:
                "cazzo";
                break;
            case 4:
                "cazzo";
                break;
            case 0:
                temp = false;
                break;
            default:
                temp = false;
                break;
        }
    }

   return 0;
}

void addVoice(Rubrica *r, char *name, char *phoneNumber){
    r->list[r->len].name = name;
    r->list[r->len].phoneNumber = phoneNumber;
    r->len++;
}

Rubrica *newRubrica(){
    Rubrica *r;
    r = (Rubrica*)malloc(sizeof(Rubrica));
    r->len = 0;
    return r;
}

bool isIn(Rubrica *r, char *n){
    for(int i=0;i < r->len; i++){
        if(r->list[i].name == n)
            return true;
    }
    return false;
}

void tryAddVoice(Rubrica *r){
    char *name, *phoneNumber;

    printf("Inserisci il nome: ");
    scanf(" %[^\n]%*c", &name); 
    if(isIn(r, name)){
        printf("Nome gia' presente!\n\n");
    }else{
        printf("Inserisci il numero di telefono: ");
        scanf(" %[^\n]%*c", &phoneNumber); 
        addVoice(r, name, phoneNumber);
    }
}

int printMenu(){
    int choice;

    printf("Rubrica\n");
    printf("1) Aggiungi nuova voce in rubrica\n");
    printf("2) Ricerca esatta per nome\n");
    printf("3) Ricerca approssimata per nome\n");
    printf("4) Stampa completa rubrica\n");
    printf("0) Esci dal programma\n\n");

    printf("Scegli una tra le seguenti operazioni: ");  // limitare l'inserimento dell'input ai soli valori desiderati
    scanf(" %d", &choice);

    return choice;
}

int lenArray(voceRubrica r[MAX_VOCI]){
    return sizeof r / sizeof *r;
}
